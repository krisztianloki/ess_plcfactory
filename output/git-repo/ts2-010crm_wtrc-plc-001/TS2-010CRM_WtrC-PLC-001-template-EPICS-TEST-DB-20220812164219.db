
################################################################################
#
# This file was autogenerated by PLCFactory
# Please, DO NOT EDIT by hand!
#
#
# PLC-IOC Hash: -1975058360
# Timestamp: 20220812164219
# Branch of PLCFactory: master
# Commit id of PLCFactory: ffa943c824bc42c5378196579606b0f20e8dd5c8
# Status of PLCFactory working copy: Clean
# Command line:
#
# plcfactory.py --device TS2-010CRM:WtrC-PLC-001 --plc-siemens --ioc --enable-python3 --plc-no-diag
#
################################################################################

#
# This shows the module version that was 'required'
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:ModVersionR")
{
	field(DESC,	"Module version")
	field(DISP,	"1")
	field(VAL,	"$(MODVERSION=20220812164219)")
	field(PINI,	"YES")
}

#
# This can be used to get the branch of PLCFactory that was used to generate this file
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCFBranchR")
{
	field(DESC,	"Branch of PLCFactory")
	field(DISP,	"1")
#master
	field(VAL,	"master")
	field(PINI,	"YES")
	info("plcf_branch", "master")
}

#
# This can be used to get the exact same version of PLCFactory that was used to generate this file
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCFCommitR")
{
	field(DESC,	"Commit hash of PLCFactory")
	field(DISP,	"1")
#ffa943c824bc42c5378196579606b0f20e8dd5c8
	field(VAL,	"ffa943c824bc42c5378196579606b0f20e8dd5c")
	field(PINI,	"YES")
	info("plcf_commit", "ffa943c824bc42c5378196579606b0f20e8dd5c8")
}

#
# This shows if the PLCFactory working copy was clean when this file was generated
#
record(bi, "TS2-010CRM:WtrC-PLC-001:PLCFStatusR")
{
	field(DESC,	"Status of PLCFactory")
	field(DISP,	"1")
	field(ZNAM,	"Dirty")
	field(ONAM,	"Clean")
	field(VAL,	"1")
	field(PINI,	"YES")
}

#
# This shows when PLCFactory was run to generate this file
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCFTimestampR")
{
	field(DESC,	"Timestamp when PLCFactory was run")
	field(DISP,	"1")
	field(VAL,	"20220812164219")
	field(PINI,	"YES")
	info("plcf_timestamp", "20220812164219")
}

#
# These are used in DOL links
#
record(bi, "TS2-010CRM:WtrC-PLC-001:#plcfC1")
{
	field(DESC,	"Constant 1")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"1")
}

record(longin, "TS2-010CRM:WtrC-PLC-001:#plcfC2")
{
	field(DESC,	"Constant 2")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"2")
}


#########################################################
########## EPICS <-> PLC connection management ##########
#########################################################
record(bi, "TS2-010CRM:WtrC-PLC-001:ModbusConnectedR")
{
	field(DESC,	"Shows if the MODBUS channel connected")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
	field(VAL,	"1")
	field(PINI,	"YES")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLCS")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:S7ConnectedR")
{
	field(DESC,	"Shows if the S7 channel is connected")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
	field(VAL,	"1")
	field(PINI,	"YES")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfCalcConn")
{
# Need to explicitly scan because using multiple CPs is not robust
	field(SCAN,	"1 second")
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:S7ConnectedR CP")
	field(INPB,	"TS2-010CRM:WtrC-PLC-001:ModbusConnectedR CP")
	field(CALC,	"A && B")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:ConnectedR PP")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:ConnectedR")
{
	field(DESC,	"Shows if the PLC is connected")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
}
record(event, "TS2-010CRM:WtrC-PLC-001:#plcfEvent")
{
	field(DESC,	"Generate S7plc event")
	field(SCAN,	".2 second")
	field(VAL,	"S7plc")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:S7ConnectedR")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
{
	field(DESC,	"Shows if the comms hash is correct")
	field(ONAM,	"Correct")
	field(ZNAM,	"Incorrect")
	field(ZSV,      "MAJOR")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:AliveR")
{
	alias("TS2-010CRM:WtrC-PLC-001:CommsOK")
	field(DESC,	"Shows if the PLC is sending heartbeats")
	field(ONAM,	"Alive")
	field(ZNAM,	"Not responding")
	field(ZSV,      "MAJOR")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfCheckHash")
{
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
	field(INPB,	"TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR")
	field(INPC,	"TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR.STAT")
	field(CALC,	"A == B && C == 0")
	field(OOPT,	"On Change")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR PP")
}
record(bo, "TS2-010CRM:WtrC-PLC-001:#plcfGotHeartbeat")
{
	field(DESC,	"Update AliveR")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:#plcfC1")
	field(OMSL,	"closed_loop")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:#plcfKickAlive PP")
}
record(bo, "TS2-010CRM:WtrC-PLC-001:#plcfKickAlive")
{
	field(DESC,	"Set AliveR to true for 2 seconds")
	field(HIGH,	"2")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:AliveR PP")
}
record(longin, "TS2-010CRM:WtrC-PLC-001:UploadStat-RB")
{
	field(DESC,	"Parameter upload status from the PLC")
	field(DISS,	"INVALID")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR CP")
	info(autosaveFields_pass0, "VAL")
}

########################################################
########## EPICS -> PLC comms management data ##########
########################################################
record(ao, "TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
{
# Maintain compatibility with existing OPIs
	alias("TS2-010CRM:WtrC-PLC-001:iCommsHashToPLC")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"-1975058360")
}
record(ao, "TS2-010CRM:WtrC-PLC-001:CommsHashToPLCS")
{
	field(DESC,	"Sends comms hash to PLC")
	field(OMSL,	"closed_loop")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ConnectedR")
}
record(calc, "TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC")
{
	field(SCAN,	"1 second")
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC.VAL")
	field(CALC,	"(A >= 32000)? 0 : A + 1")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ConnectedR")
}
record(ao, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
{
	field(DESC,	"Sends heartbeat to PLC")
	field(OMSL,	"closed_loop")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC.VAL")
	field(OIF,	"Full")
	field(DRVL,	"0")
	field(DRVH,	"32000")
}
record(longout, "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS")
{
	field(DESC,	"Parameter upload status to the PLC")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:UploadStat-RB PP")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ConnectedR")
}

########################################################
########## PLC -> EPICS comms management data ##########
########################################################
record(ai, "TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR")
{
	field(DESC,	"Comms hash from PLC")
	field(SCAN,	"1 second")
	field(PINI,	"YES")
	field(VAL,	"-1975058360")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfCheckHash")
}
record(ai, "TS2-010CRM:WtrC-PLC-001:HeartbeatFromPLCR")
{
	field(DESC,	"Heartbeat from PLC")
	field(INP,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC.VAL CP")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfGotHeartbeat")
}

########################################################
################# Test management data #################
########################################################
record(ao, "TS2-010CRM:WtrC-PLC-001:FixHashS")
{
	field(DESC,	"Make HASH correct")
	field(OMSL,	"closed_loop")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR PP")
}

record(bo, "TS2-010CRM:WtrC-PLC-001:RuinHashS")
{
	field(DESC,	"Make HASH incorrect")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfRuinHash")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfRuinHash")
{
	field(DESC,	"Make HASH incorrect")
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
	field(CALC,	"A * -1")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR PP")
}

##########
########## TS2-010CRM:WtrC-Virt-100 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_DO                                                               ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                             DIO - Single Digital Input/Output                            ##
##                                                                                          ##
##                                                                                          ##
############################ Version: 1.0             ########################################
#Author:  Saeed, Miklos Boros
#Date:    20-11-2019
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-Virt-100 PLC   -> EPICS status   ##########
##########

#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Opened",                  PV_DESC="Opened",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",                  PV_DESC="Closed",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Alarm","Alarm",           PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-Virt-100:Alarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Alarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("Warning","Warning",       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-Virt-100:Warning")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Warning")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Warning")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-Virt-100 EPICS -> PLC commands   ##########
##########

#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-Virt-100 EPICS -> PLC parameters ##########
##########




##########
########## TS2-010CRM:WtrC-FIS-101 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-101:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-101:FlowTooHigh")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "FlowTooHigh")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-101:FlowTooLow")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "FlowTooLow")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-101:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-101:Discrepancy")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Discrepancy")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-101:HW_ModuleError")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "HW_ModuleError")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FHIGH_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FHIGH_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FLOW_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FLOW_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-101 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-FIS-102 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-102:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-102:FlowTooHigh")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "FlowTooHigh")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-102:FlowTooLow")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "FlowTooLow")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-102:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-102:Discrepancy")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Discrepancy")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-102:HW_ModuleError")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "HW_ModuleError")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FHIGH_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FHIGH_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FLOW_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FLOW_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-102 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-FIS-103 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-103 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-103:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-103:FlowTooHigh")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "FlowTooHigh")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-103:FlowTooLow")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "FlowTooLow")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-103:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-103:Discrepancy")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Discrepancy")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-103:HW_ModuleError")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "HW_ModuleError")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-103 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FHIGH_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FHIGH_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FLOW_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FLOW_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-103 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-FIS-104 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-104 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-104:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-104:FlowTooHigh")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "FlowTooHigh")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-104:FlowTooLow")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "FlowTooLow")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-104:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-104:Discrepancy")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Discrepancy")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-104:HW_ModuleError")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "HW_ModuleError")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-104 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FHIGH_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FHIGH_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FLOW_ON")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FLOW_OFF")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-104 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-PT-101 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                               PT - Pressure Transmitter                                  ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-PT-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",           PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-PT-101:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",            PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-PT-101:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",          PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-PT-101:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-PT-101:TransmitterColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "TransmitterColor")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",               PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:ScaleLOW")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "ScaleLOW")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",              PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:ScaleHIGH")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "ScaleHIGH")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,                           PV_DESC="Pressure Value",          PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:MeasValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Pressure Value")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "MeasValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-PT-101:RAWValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "RAWValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-101:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-101:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-PT-101:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-PT-101:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Pressure Underrange",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Underrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Underrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Overrange",           "Pressure Overrange",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Overrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Overrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HIHI",                "Pressure HIHI",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("HI",                  "Pressure HI",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("LO",                  "Pressure LO",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("LOLO",                "Pressure LOLO",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "LOLO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Param_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Param_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Module_Error")
	info(autosaveFields_pass0, "VAL")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Pressure", PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_ForceValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_ForceValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-PT-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_ForceVal")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_ForceVal")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-PT-101 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_HIHI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_HI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_LO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_LOLO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force pressure",          PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_ForceValue")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-PT-101:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-PT-101:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-PT-101:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-PT-101:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-PT-101:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-PT-101:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-PT-101:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-PT-101:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-PT-101:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-PT-102 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                               PT - Pressure Transmitter                                  ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-PT-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",           PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-PT-102:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",            PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-PT-102:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",          PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-PT-102:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-PT-102:TransmitterColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "TransmitterColor")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",               PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:ScaleLOW")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "ScaleLOW")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",              PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:ScaleHIGH")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "ScaleHIGH")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,                           PV_DESC="Pressure Value",          PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:MeasValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Pressure Value")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "MeasValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-PT-102:RAWValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "RAWValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-102:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-102:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-PT-102:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-PT-102:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Pressure Underrange",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Underrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Underrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Overrange",           "Pressure Overrange",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Overrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Overrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HIHI",                "Pressure HIHI",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("HI",                  "Pressure HI",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("LO",                  "Pressure LO",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("LOLO",                "Pressure LOLO",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "LOLO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Param_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Param_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Module_Error")
	info(autosaveFields_pass0, "VAL")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Pressure", PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_ForceValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_ForceValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-PT-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_ForceVal")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_ForceVal")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-PT-102 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_HIHI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_HI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_LO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_LOLO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force pressure",          PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_ForceValue")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-PT-102:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-PT-102:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-PT-102:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-PT-102:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-PT-102:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-PT-102:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-PT-102:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-PT-102:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-PT-102:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-101 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-101:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-101:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-101:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-101:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-101:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-101:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-101:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-101:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-101:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-101:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-101:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-101:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-101:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-101 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-101:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-101:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-101:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-101:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-101:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-102 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-102:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-102:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-102:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-102:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-102:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-102:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-102:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-102:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-102:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-102:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-102:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-102:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-102:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-102 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-102:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-102:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-102:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-102:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-102:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-103 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-103 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-103:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-103:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-103:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-103:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-103:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-103:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-103:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-103:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-103:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-103:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-103:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-103:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-103:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-103 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-103 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-103:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-103:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-103:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-103:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-103:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-104 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-104 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-104:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-104:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-104:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-104:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-104:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-104:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-104:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-104:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-104:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-104:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-104:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-104:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-104:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-104 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-104 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-104:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-104:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-104:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-104:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-104:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-109 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-109 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-109:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-109:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-109:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-109:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-109:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-109:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-109:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-109:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-109:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-109:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-109:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-109:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-109:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-109 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-109 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-109:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-109:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-109:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-109:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-109:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-110 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-110 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-110:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-110:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-110:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-110:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-110:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-110:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-110:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-110:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-110:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-110:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-110:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-110:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-110:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-110 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-110 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-110:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-110:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-110:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-110:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-110:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-111 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-111 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-111:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-111:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-111:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-111:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-111:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-111:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-111:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-111:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-111:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-111:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-111:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-111:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-111:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-111 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-111 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-111:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-111:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-111:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-111:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-111:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-112 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-112 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-112:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-112:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-112:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-112:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-112:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-112:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-112:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-112:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-112:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-112:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-112:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-112:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-112:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-112 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-112 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-112:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-112:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-112:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-112:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-112:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-113 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-113 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:OpMode_Auto")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpMode_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:OpMode_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpMode_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:Opened")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Opened")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:Closed")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Closed")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:Solenoid")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Solenoid")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-113:ValveColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "ValveColor")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-113:SolenoidColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "SolenoidColor")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-113:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-113:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-113:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:GroupInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "GroupInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:StartInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "StartInterlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:StopInterlock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "StopInterlock")
	info(autosaveFields_pass0, "VAL")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableBlkOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableBlkOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableBlkClose")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableBlkClose")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableAutoBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableAutoBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-113:InterlockMsg")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "InterlockMsg")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-113:NormallyOpen")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "NormallyOpen")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-113:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-113:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-113:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-113:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Opening_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Opening_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Closing_TimeOut")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Closing_TimeOut")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Input_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Input_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Output_Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Output_Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:SSTriggered")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "SSTriggered")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:StaPnR")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "StaPnR")
	info(autosaveFields_pass0, "VAL")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-113:OpeningTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpeningTime")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-113:ClosingTime")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "ClosingTime")
	info(autosaveFields_pass0, "VAL")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-113 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_Auto")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_Auto")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_Manual")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ManuOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ManuOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ManuClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ManuClose")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ForceOpen")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ForceOpen")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ForceClose")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ForceClose")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-113 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-113:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-113:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-113:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-113:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-113:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-101 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-101:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-101:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-101:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-101:TransmitterColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "TransmitterColor")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:ScaleLOW")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "ScaleLOW")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:ScaleHIGH")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "ScaleHIGH")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:MeasValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "MeasValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-101:MeasCurrent")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "MeasCurrent")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-101:RAWValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "RAWValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-101:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-101:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-101:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-101:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Underrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Underrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Overrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Overrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "LOLO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Param_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Param_Error")
	info(autosaveFields_pass0, "VAL")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_ForceValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_ForceValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_ForceVal")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_ForceVal")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-101 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_HIHI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_HI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_LO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_LOLO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_ForceValue")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-101:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-101:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-101:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-101:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-101:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-101:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-101:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-101:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-101:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-102 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-102:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-102:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-102:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-102:TransmitterColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "TransmitterColor")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:ScaleLOW")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "ScaleLOW")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:ScaleHIGH")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "ScaleHIGH")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:MeasValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "MeasValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-102:MeasCurrent")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "MeasCurrent")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-102:RAWValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "RAWValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-102:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-102:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-102:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-102:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Underrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Underrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Overrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Overrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "LOLO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Param_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Param_Error")
	info(autosaveFields_pass0, "VAL")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_ForceValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_ForceValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_ForceVal")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_ForceVal")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-102 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_HIHI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_HI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_LO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_LOLO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_ForceValue")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-102:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-102:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-102:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-102:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-102:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-102:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-102:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-102:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-102:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-103 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-103 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-103:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-103:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-103:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-103:TransmitterColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "TransmitterColor")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:ScaleLOW")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "ScaleLOW")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:ScaleHIGH")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "ScaleHIGH")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:MeasValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "MeasValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-103:MeasCurrent")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "MeasCurrent")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-103:RAWValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "RAWValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-103:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-103:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-103:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-103:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Underrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Underrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Overrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Overrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "LOLO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Param_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Param_Error")
	info(autosaveFields_pass0, "VAL")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_ForceValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_ForceValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-103 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_ForceVal")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_ForceVal")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-103 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_HIHI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_HI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_LO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_LOLO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_ForceValue")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-103:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-103:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-103:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-103:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-103:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-103:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-103:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-103:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-103:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-104 ##########
##########
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-104 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:OpMode_FreeRun")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "OpMode_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:OpMode_Forced")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "OpMode_Forced")
	info(autosaveFields_pass0, "VAL")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-104:Inhibit_Manual")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Inhibit_Manual")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-104:Inhibit_Force")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Inhibit_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-104:Inhibit_Lock")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Inhibit_Lock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-104:TransmitterColor")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "TransmitterColor")
	info(autosaveFields_pass0, "VAL")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:EnableFreeRunBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "EnableFreeRunBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:EnableForcedBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "EnableForcedBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:EnableManualBtn")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "EnableManualBtn")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:ScaleLOW")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "ScaleLOW")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:ScaleHIGH")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "ScaleHIGH")
	info(autosaveFields_pass0, "VAL")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:MeasValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "MeasValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-104:MeasCurrent")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "MeasCurrent")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-104:RAWValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "RAWValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:DevLocked")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "DevLocked")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-104:Faceplate_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-104:BlockIcon_LockID")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-104:LatchAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "LatchAlarm")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-104:GroupAlarm")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "GroupAlarm")
	info(autosaveFields_pass0, "VAL")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Underrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Underrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Overrange")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Overrange")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "LOLO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:IO_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "IO_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Module_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Module_Error")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Param_Error")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Param_Error")
	info(autosaveFields_pass0, "VAL")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_ForceValue")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_ForceValue")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_HIHI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_HI")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_LO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_LOLO")
{
	field(SCAN, "Event")
	field(EVNT, "S7plc")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-104 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_FreeRun")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_FreeRun")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_Force")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_Force")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_ForceVal")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_ForceVal")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_AckAlarm")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_AckAlarm")
	info(autosaveFields_pass0, "VAL")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_ForceUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_DevLock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_DevLock")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_DevUnlock")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_DevUnlock")
	info(autosaveFields_pass0, "VAL")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-104 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_HIHI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_HI")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_LO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_LOLO")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_ForceValue")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Faceplate_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-104:P_BlockIcon_LockID")
{
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	field(FLNK, "TS2-010CRM:WtrC-PLC-001:#plcfDoneUploadStat")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-104:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-104:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-104:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-104:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-104:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-104:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-104:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-104:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}



record(fanout, "TS2-010CRM:WtrC-PLC-001:UploadParametersCmd")
{
	alias("TS2-010CRM:WtrC-PLC-001:UploadParametersS")

	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:#plcfInitUploadStat")
	field(LNK1, "TS2-010CRM:WtrC-PT-101:#plcfDUplParamsCmd")
	field(LNK2, "TS2-010CRM:WtrC-PT-102:#plcfDUplParamsCmd")
	field(LNK3, "TS2-010CRM:WtrC-YCV-101:#plcfDUplParamsCmd")
	field(LNK4, "TS2-010CRM:WtrC-YCV-102:#plcfDUplParamsCmd")
	field(LNK5, "TS2-010CRM:WtrC-YCV-103:#plcfDUplParamsCmd")
	field(LNK6, "TS2-010CRM:WtrC-YCV-104:#plcfDUplParamsCmd")
	field(LNK7, "TS2-010CRM:WtrC-YSV-109:#plcfDUplParamsCmd")
	field(LNK8, "TS2-010CRM:WtrC-YSV-110:#plcfDUplParamsCmd")
	field(LNK9, "TS2-010CRM:WtrC-YSV-111:#plcfDUplParamsCmd")
	field(LNKA, "TS2-010CRM:WtrC-YSV-112:#plcfDUplParamsCmd")
	field(LNKB, "TS2-010CRM:WtrC-YSV-113:#plcfDUplParamsCmd")
	field(LNKC, "TS2-010CRM:WtrC-TE-101:#plcfDUplParamsCmd")
	field(LNKD, "TS2-010CRM:WtrC-TE-102:#plcfDUplParamsCmd")
	field(LNKE, "TS2-010CRM:WtrC-TE-103:#plcfDUplParamsCmd")
	field(LNKF, "TS2-010CRM:WtrC-TE-104:#plcfDUplParamsCmd")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}

record(bo, "TS2-010CRM:WtrC-PLC-001:#plcfInitUploadStat")
{
	field(DESC, "Initialize parameter uploading status")
	field(DOL,  "TS2-010CRM:WtrC-PLC-001:#plcfC1")
	field(OMSL, "closed_loop")
	field(OUT,  "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS PP")
}

record(longout, "TS2-010CRM:WtrC-PLC-001:#plcfDoneUploadStat")
{
	field(DESC, "Done parameter uploading status")
	field(DOL,  "TS2-010CRM:WtrC-PLC-001:#plcfC2")
	field(OMSL, "closed_loop")
	field(OUT,  "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS PP")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:UploadStat-RB")
	field(DISV, "0")
}

#If PLC says we are uploading but #plcfInitUploadStat was never processed ==> reset upload status in the PLC
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfAssertUplStat")
{
	field(DESC, "Assert validity of upload statistics")
	field(INPA, "TS2-010CRM:WtrC-PLC-001:UploadStat-RB CP")
	field(INPB, "TS2-010CRM:WtrC-PLC-001:#plcfInitUploadStat.UDF")
	field(CALC, "A == 1 && B == 1")
	field(OOPT, "When Non-zero")
	field(DOPT, "Use OCAL")
	field(OCAL, "0")
	field(OUT,  "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS PP")
}

