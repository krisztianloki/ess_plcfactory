
################################################################################
#
# This file was autogenerated by PLCFactory
# Please, DO NOT EDIT by hand!
#
#
# PLC-IOC Hash: -1975058360
# Timestamp: 20220812164125
# Branch of PLCFactory: master
# Commit id of PLCFactory: ffa943c824bc42c5378196579606b0f20e8dd5c8
# Status of PLCFactory working copy: Clean
# Command line:
#
# plcfactory.py --device TS2-010CRM:WtrC-PLC-001 --plc-siemens --ioc --enable-python3 --plc-no-diag
#
################################################################################

#
# This shows the module version that was 'required'
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:ModVersionR")
{
	field(DESC,	"Module version")
	field(DISP,	"1")
	field(VAL,	"$(MODVERSION=20220812164125)")
	field(PINI,	"YES")
}

#
# This can be used to get the branch of PLCFactory that was used to generate this file
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCFBranchR")
{
	field(DESC,	"Branch of PLCFactory")
	field(DISP,	"1")
#master
	field(VAL,	"master")
	field(PINI,	"YES")
	info("plcf_branch", "master")
}

#
# This can be used to get the exact same version of PLCFactory that was used to generate this file
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCFCommitR")
{
	field(DESC,	"Commit hash of PLCFactory")
	field(DISP,	"1")
#ffa943c824bc42c5378196579606b0f20e8dd5c8
	field(VAL,	"ffa943c824bc42c5378196579606b0f20e8dd5c")
	field(PINI,	"YES")
	info("plcf_commit", "ffa943c824bc42c5378196579606b0f20e8dd5c8")
}

#
# This shows if the PLCFactory working copy was clean when this file was generated
#
record(bi, "TS2-010CRM:WtrC-PLC-001:PLCFStatusR")
{
	field(DESC,	"Status of PLCFactory")
	field(DISP,	"1")
	field(ZNAM,	"Dirty")
	field(ONAM,	"Clean")
	field(VAL,	"1")
	field(PINI,	"YES")
}

#
# This shows when PLCFactory was run to generate this file
#
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCFTimestampR")
{
	field(DESC,	"Timestamp when PLCFactory was run")
	field(DISP,	"1")
	field(VAL,	"20220812164125")
	field(PINI,	"YES")
	info("plcf_timestamp", "20220812164125")
}

#
# These are used in DOL links
#
record(bi, "TS2-010CRM:WtrC-PLC-001:#plcfC1")
{
	field(DESC,	"Constant 1")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"1")
}

record(longin, "TS2-010CRM:WtrC-PLC-001:#plcfC2")
{
	field(DESC,	"Constant 2")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"2")
}


#########################################################
########## EPICS <-> PLC connection management ##########
#########################################################
record(asyn, "TS2-010CRM:WtrC-PLC-001:Asyn")
{
	field(DTYP,	"asynRecordDevice")
	field(PORT,	"$(PLCNAME)")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:ModbusConnectedR")
{
	field(DESC,	"Shows if the MODBUS channel connected")
	field(INP,	"TS2-010CRM:WtrC-PLC-001:Asyn.CNCT CP")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLCS.PROC CA")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:S7ConnectedR")
{
	field(DESC,	"Shows if the S7 channel is connected")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc stat")
	field(INP,	"@$(PLCNAME)")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
}
record(stringin, "TS2-010CRM:WtrC-PLC-001:PLCAddr-RB")
{
# We assume S7 and Modbus address are the same (as they should be)
	field(DESC,	"Address of the PLC")
}
record(scalcout, "TS2-010CRM:WtrC-PLC-001:#plcfCalcPLCAddr")
{
	field(DESC,	"Strip port number of host:port")
	field(INAA,	"TS2-010CRM:WtrC-PLC-001:S7Addr-RB CP")
	field(CALC,	"AA[0,':']")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:PLCAddr-RB PP")
}
record(stringout, "TS2-010CRM:WtrC-PLC-001:PLCAddrS")
{
	field(DESC,	"Set the address of the PLC")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfSetPLCAddr-FO")
}
record(fanout, "TS2-010CRM:WtrC-PLC-001:#plcfSetPLCAddr-FO")
{
	field(LNK1,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcS7AddrS")
	field(LNK2,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcModbusAddrS")
}
record(scalcout, "TS2-010CRM:WtrC-PLC-001:#plcfCalcS7AddrS")
{
	field(DESC,	"Construct the S7 address")
	field(INAA,	"TS2-010CRM:WtrC-PLC-001:PLCAddrS")
	field(CALC,	"AA + ':' + '$(S7_PORT)'")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:#plcfS7AddrS PP")
}
record(scalcout, "TS2-010CRM:WtrC-PLC-001:#plcfCalcModbusAddrS")
{
	field(DESC,	"Construct the Modbus address")
	field(INAA,	"TS2-010CRM:WtrC-PLC-001:PLCAddrS")
	field(CALC,	"AA + ':' + '$(MODBUS_PORT)'")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:Asyn.HOSTINFO PP")
}
record(stringin, "TS2-010CRM:WtrC-PLC-001:ModbusAddr-RB")
{
	field(DESC,	"Address of the PLC")
	field(INP,	"TS2-010CRM:WtrC-PLC-001:Asyn.HOSTINFO CP")
}
record(stringin, "TS2-010CRM:WtrC-PLC-001:S7Addr-RB")
{
	field(DESC,	"Address of the PLC")
	field(INP,	"TS2-010CRM:WtrC-PLC-001:#plcfS7AddrS CP")
}
record(stringout, "TS2-010CRM:WtrC-PLC-001:#plcfS7AddrS")
{
	field(DESC,	"Set address of the PLC")
	field(DTYP,	"S7plc addr")
	field(OUT,	"@$(PLCNAME)")
	field(DISP,	"1")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfCalcConn")
{
# Need to explicitly scan because using multiple CPs is not robust
	field(SCAN,	"1 second")
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:S7ConnectedR CP")
	field(INPB,	"TS2-010CRM:WtrC-PLC-001:ModbusConnectedR CP")
	field(CALC,	"A && B")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:ConnectedR PP")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:ConnectedR")
{
	field(DESC,	"Shows if the PLC is connected")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
{
	field(DESC,	"Shows if the comms hash is correct")
	field(ONAM,	"Correct")
	field(ZNAM,	"Incorrect")
	field(ZSV,      "MAJOR")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:AliveR")
{
	alias("TS2-010CRM:WtrC-PLC-001:CommsOK")
	field(DESC,	"Shows if the PLC is sending heartbeats")
	field(ONAM,	"Alive")
	field(ZNAM,	"Not responding")
	field(ZSV,      "MAJOR")
}
record(bi, "TS2-010CRM:WtrC-PLC-001:PayloadSizeCorrectR")
{
	field(DESC,	"Shows if the payload size is correct")
	field(ONAM,	"Correct")
	field(ZNAM,	"Incorrect")
	field(ZSV,      "MAJOR")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfCheckHash")
{
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
	field(INPB,	"TS2-010CRM:WtrC-PLC-001:#plcfHasMBHash")
	field(INPC,	"TS2-010CRM:WtrC-PLC-001:S7CommsHash")
	field(INPD,	"TS2-010CRM:WtrC-PLC-001:MBCommsHash")
	field(INPE,	"TS2-010CRM:WtrC-PLC-001:S7CommsHash.STAT")
	field(INPF,	"TS2-010CRM:WtrC-PLC-001:MBCommsHash.STAT")
# if we have the HASH in the modbus map it should be the same as the one from the S7 stream
	field(CALC,	"A == C && (B ? C == D : 1) && E == 0 && F == 0")
	field(OOPT,	"On Change")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR PP")
}
record(bo, "TS2-010CRM:WtrC-PLC-001:#plcfGotHeartbeat")
{
	field(DESC,	"Update AliveR")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:#plcfC1")
	field(OMSL,	"closed_loop")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:#plcfKickAlive PP")
}
record(bo, "TS2-010CRM:WtrC-PLC-001:#plcfKickAlive")
{
	field(DESC,	"Set AliveR to true for 2 seconds")
	field(HIGH,	"5")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:AliveR PP")
}
record(mbbi, "TS2-010CRM:WtrC-PLC-001:UploadStat-RB")
{
# Maintain compatibility with existing OPIs
	alias("TS2-010CRM:WtrC-PLC-001:UploadStatR")
	field(DESC,	"Parameter upload status from the PLC")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc")
	field(INP,	"@$(PLCNAME)/6 T=INT16")
	field(NOBT,     "16")
	field(SHFT,     "0")

	field(ZRVL,	"0")
	field(ZRST,	"Never uploaded")

	field(ONVL,	"1")
	field(ONST,	"Uploading...")

	field(TWVL,	"2")
	field(TWST,	"Uploaded")

	field(DISS,	"INVALID")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}
record(longin, "TS2-010CRM:WtrC-PLC-001:PayloadSizeR")
{
	field(DESC,	"The configuread payload size")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"${PAYLOAD_SIZE=-1}")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfCheckPayloadSize")
{
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:PayloadSizeR")
	field(INPB,	"TS2-010CRM:WtrC-PLC-001:PayloadSizeFromPLCR")
	field(INPC,	"TS2-010CRM:WtrC-PLC-001:PayloadSizeFromPLCR.STAT")
	field(CALC,	"A == B && C == 0")
	field(OOPT,	"On Change")
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:PayloadSizeCorrectR PP")
}

########################################################
########## EPICS -> PLC comms management data ##########
########################################################
record(ao, "TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
{
# Maintain compatibility with existing OPIs
	alias("TS2-010CRM:WtrC-PLC-001:iCommsHashToPLC")
	field(DESC,	"The comms hash to PLC")
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"-1975058360")
}
record(ao, "TS2-010CRM:WtrC-PLC-001:CommsHashToPLCS")
{
	field(DESC,	"Sends comms hash to PLC")
	field(SCAN,	"1 second")
	field(DTYP,	"asynInt32")
	field(OUT,	"@asyn($(PLCNAME)write, 0, 100)INT32_BE")
	field(OMSL,	"closed_loop")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:CommsHashToPLC")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ModbusConnectedR")
}
record(calc, "TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC")
{
	field(SCAN,	"1 second")
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC.VAL")
	field(CALC,	"(A >= 32000)? 0 : A + 1")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ModbusConnectedR")
}
record(ao, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
{
	field(DESC,	"Sends heartbeat to PLC")
	field(DTYP,	"asynInt32")
	field(OUT,	"@asyn($(PLCNAME)write, 2, 100)")
	field(OMSL,	"closed_loop")
	field(DOL,	"TS2-010CRM:WtrC-PLC-001:#plcfCalcHeartbeatToPLC.VAL")
	field(OIF,	"Full")
	field(DRVL,	"0")
	field(DRVH,	"32000")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ModbusConnectedR")
}
record(longout, "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS")
{
	field(DESC,	"Parameter upload status to the PLC")
	field(DTYP,	"asynInt32")
	field(OUT,	"@asyn($(PLCNAME)write, 5, 100)")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:ModbusConnectedR")
}

########################################################
########## PLC -> EPICS comms management data ##########
########################################################
# This iS7CommsHash/iMBCommsHash/iIsMBHash magic is needed because moving the HASH to the modbus map
#  does not change the HASH itself so the new SCL is not necessarily downloaded to the PLC
# AND making sure that iS7CommsHash == iMBCommsHash is a good check to make sure that the size of
#  the S7 stream is correctly set
record(ai, "TS2-010CRM:WtrC-PLC-001:S7CommsHash")
{
	field(DESC,	"Comms hash from PLC using S7 stream")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc")
	field(INP,	"@$(PLCNAME)/0 T=INT32")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR")
}
record(ai, "TS2-010CRM:WtrC-PLC-001:MBCommsHash")
{
	field(DESC,	"Comms hash from PLC using MB map")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"asynInt32")
	field(INP,	"@asyn($(PLCNAME)read, 3, 100)INT32_BE")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfHasMBHash")
}
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfHasMBHash")
{
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:MBCommsHash")
	field(CALC,	"A != 0")
# Make sure to process it even if it is being processed right now
	field(OUT,	"TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR.PROC CA")
}
record(sel, "TS2-010CRM:WtrC-PLC-001:CommsHashFromPLCR")
{
	field(DESC,	"Comms hash from PLC")
	field(NVL,	"TS2-010CRM:WtrC-PLC-001:#plcfHasMBHash")
	field(INPA,	"TS2-010CRM:WtrC-PLC-001:S7CommsHash MSS")
	field(INPB,	"TS2-010CRM:WtrC-PLC-001:MBCommsHash MSS")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfCheckHash")
}
record(ai, "TS2-010CRM:WtrC-PLC-001:HeartbeatFromPLCR")
{
	field(DESC,	"Heartbeat from PLC")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc")
	field(INP,	"@$(PLCNAME)/4 T=INT16")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfGotHeartbeat")
	field(DISS,	"INVALID")
	field(DISV,	"0")
	field(SDIS,	"TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}
record(longin, "TS2-010CRM:WtrC-PLC-001:PayloadSizeFromPLCR")
{
	field(DESC,	"Payload size from PLC using MB map")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"asynInt32")
	field(INP,	"@asyn($(PLCNAME)read, 6, 100)INT16")
	field(FLNK,	"TS2-010CRM:WtrC-PLC-001:#plcfCheckPayloadSize")
}


##########
########## TS2-010CRM:WtrC-Virt-100 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_DO                                                               ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                             DIO - Single Digital Input/Output                            ##
##                                                                                          ##
##                                                                                          ##
############################ Version: 1.0             ########################################
#Author:  Saeed, Miklos Boros
#Date:    20-11-2019
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-Virt-100 PLC   -> EPICS status   ##########
##########

#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("Opened",                  PV_DESC="Opened",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Closed",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-Virt-100:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Closed")
}


#Alarm signals
#<<<--- add_major_alarm("Alarm","Alarm",           PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-Virt-100:Alarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Alarm")
}

#<<<--- add_minor_alarm("Warning","Warning",       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-Virt-100:Warning")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Warning")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Warning")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-Virt-100 EPICS -> PLC commands   ##########
##########

#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 10, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 10, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_Manual")
}


#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 10, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-Virt-100:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 10, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-Virt-100_iDB")
	info("plc_variable", "Cmd_ManuClose")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-Virt-100 EPICS -> PLC parameters ##########
##########




##########
########## TS2-010CRM:WtrC-FIS-101 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-101:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Inhibit_Force")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-101:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-101:FlowTooHigh")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "FlowTooHigh")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-101:FlowTooLow")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "FlowTooLow")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-101:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-101:Discrepancy")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Discrepancy")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-101:HW_ModuleError")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "HW_ModuleError")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_Force")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FHIGH_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FHIGH_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FLOW_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_FLOW_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-101:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 11, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-101 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-FIS-102 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-102:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Inhibit_Force")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-102:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-102:FlowTooHigh")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "FlowTooHigh")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-102:FlowTooLow")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "FlowTooLow")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-102:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-102:Discrepancy")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Discrepancy")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-102:HW_ModuleError")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "HW_ModuleError")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_Force")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FHIGH_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FHIGH_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FLOW_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_FLOW_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-102:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-102 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-FIS-103 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-103 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-103:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Inhibit_Force")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-103:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-103:FlowTooHigh")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "FlowTooHigh")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-103:FlowTooLow")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "FlowTooLow")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-103:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-103:Discrepancy")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Discrepancy")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-103:HW_ModuleError")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "HW_ModuleError")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-103 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_Force")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FHIGH_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FHIGH_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FLOW_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_FLOW_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-103:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 13, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-103_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-103 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-FIS-104 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                     FS - Flow switch with two possible digital inputs                    ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    03-02-2022
#Version: v1.3
#Changes:
#1. Vaiable Name Unification
############################         Version: 1.0,1.1,1.2             ########################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization, first release



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-FIS-104 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-FIS-104:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Inhibit_Force")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-FIS-104:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Transmitter value
#<<<--- add_major_alarm("FlowTooHigh",         "Flow High Alarm",             PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-104:FlowTooHigh")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow High Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "FlowTooHigh")
}

#<<<--- add_major_alarm("FlowTooLow",          "Flow Low Alarm",              PV_ZNAM="True")
record(bi, "TS2-010CRM:WtrC-FIS-104:FlowTooLow")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Flow Low Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "FlowTooLow")
}



#Alarm signals
#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-104:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Discrepancy",         "Discrepancy",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-104:Discrepancy")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Discrepancy")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Discrepancy")
}

#<<<--- add_major_alarm("HW_ModuleError",      "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-FIS-104:HW_ModuleError")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/28 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "HW_ModuleError")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-FIS-104 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_Force")
}


#<<<--- add_digital("Cmd_FHIGH_ON",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FHIGH_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FHIGH_ON")
}

#<<<--- add_digital("Cmd_FHIGH_OFF",           PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FHIGH_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FHIGH_OFF")
}


#<<<--- add_digital("Cmd_FLOW_ON",             PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FLOW_ON")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FLOW_ON")
}

#<<<--- add_digital("Cmd_FLOW_OFF",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_FLOW_OFF")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_FLOW_OFF")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-FIS-104:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 14, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-FIS-104_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-FIS-104 EPICS -> PLC parameters ##########
##########





##########
########## TS2-010CRM:WtrC-PT-101 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                               PT - Pressure Transmitter                                  ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-PT-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/30 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/30 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",           PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-PT-101:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/30 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",            PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-PT-101:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/30 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",          PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-PT-101:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/30 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-PT-101:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/32 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/34 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/34 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/34 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",               PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/36 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",              PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/40 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,                           PV_DESC="Pressure Value",          PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/44 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Pressure Value")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-PT-101:RAWValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/48 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "RAWValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-101:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-101:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/54 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-101:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/58 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-PT-101:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-PT-101:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Pressure Underrange",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Pressure Overrange",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Pressure HIHI",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Pressure HI",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Pressure LO",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Pressure LOLO",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Param_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Param_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-101:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Pressure", PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/64 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/68 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/72 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/76 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-101:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/80 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-PT-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-101:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 15, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-PT-101 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 16, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 18, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 20, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 22, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force pressure",          PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-101:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 24, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-PT-101:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 26, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-PT-101:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 28, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-101_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-PT-101:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-PT-101:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-PT-101:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-PT-101:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-PT-101:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-PT-101:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-PT-101:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-PT-101:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-PT-102 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                               PT - Pressure Transmitter                                  ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-PT-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/84 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/84 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",           PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-PT-102:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/84 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",            PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-PT-102:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/84 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",          PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-PT-102:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/84 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-PT-102:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/86 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/88 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/88 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/88 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",               PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/90 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",              PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/94 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,                           PV_DESC="Pressure Value",          PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/98 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Pressure Value")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-PT-102:RAWValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/102 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "RAWValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                    PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-PT-102:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-102:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/108 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-PT-102:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/112 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-PT-102:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-PT-102:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Pressure Underrange",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Pressure Overrange",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Pressure HIHI",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Pressure HI",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Pressure LO",                    PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Pressure LOLO",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Pressure LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Param_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Param_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-PT-102:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Pressure", PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/118 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/122 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/126 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",       PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/130 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",     PV_EGU="bar")
record(ai, "TS2-010CRM:WtrC-PT-102:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/134 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-PT-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-PT-102:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 30, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-PT-102 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 31, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 33, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 35, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",              PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 37, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force pressure",          PV_EGU="bar")
record(ao, "TS2-010CRM:WtrC-PT-102:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 39, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force pressure")
	field(EGU,  "bar")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-PT-102:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 41, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-PT-102:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 43, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-PT-102_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-PT-102:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-PT-102:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-PT-102:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-PT-102:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-PT-102:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-PT-102:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-PT-102:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-PT-102:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-101 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-101:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/140 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-101:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/142 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-101:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-101:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-101:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/144 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-101:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/146 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-101:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/186 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-101:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/186 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-101:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/188 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-101:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/192 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-101:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-101:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-101:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-101:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/198 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-101:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/202 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-101:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 45, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-101 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-101:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 46, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-101:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 48, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-101_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-101:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-101:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-101:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-102 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-102:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/208 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-102:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/210 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-102:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-102:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-102:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/212 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-102:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-102:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/254 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-102:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/254 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-102:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/256 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-102:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/260 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-102:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-102:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-102:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-102:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/266 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-102:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/270 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-102:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 50, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-102 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-102:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 51, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-102:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 53, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-102_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-102:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-102:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-102:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-103 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-103 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-103:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/276 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-103:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/278 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-103:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-103:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-103:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/280 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-103:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/282 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-103:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-103:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-103:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/324 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-103:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/328 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-103:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-103:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-103:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-103:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/334 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-103:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/338 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-103 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-103:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 55, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-103 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-103:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 56, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-103:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 58, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-103_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-103:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-103:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-103:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YCV-104 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YCV-104 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/342 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/342 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/342 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/342 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/342 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/342 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YCV-104:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/344 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YCV-104:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/346 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YCV-104:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YCV-104:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YCV-104:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YCV-104:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/350 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YCV-104:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/390 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YCV-104:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/390 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-104:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/392 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YCV-104:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/396 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YCV-104:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YCV-104:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YCV-104:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YCV-104:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/402 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YCV-104:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/406 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YCV-104 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YCV-104:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 60, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YCV-104 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YCV-104:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 61, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YCV-104:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 63, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YCV-104_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YCV-104:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YCV-104:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YCV-104:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-109 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-109 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/410 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/410 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/410 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/410 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/410 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/410 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-109:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/412 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-109:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/414 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-109:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-109:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-109:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-109:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/418 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-109:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/458 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-109:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/458 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-109:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/460 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-109:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/464 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-109:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-109:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-109:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-109:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/470 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-109:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/474 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-109 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-109:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 65, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-109 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-109:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 66, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-109:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 68, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-109_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-109:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-109:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-109:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-110 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-110 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-110:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-110:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/482 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-110:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-110:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-110:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/484 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-110:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/486 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-110:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/526 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-110:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/526 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-110:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/528 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-110:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-110:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-110:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-110:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-110:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-110:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/542 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-110 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-110:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 70, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-110 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-110:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 71, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-110:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 73, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-110_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-110:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-110:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-110:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-111 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-111 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/546 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/546 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/546 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/546 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/546 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/546 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-111:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-111:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/550 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-111:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-111:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-111:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/552 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-111:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/554 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-111:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/594 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-111:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/594 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-111:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/596 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-111:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-111:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-111:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-111:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/604 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-111:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/606 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-111:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-111 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-111:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 75, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-111 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-111:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 76, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-111:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 78, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-111_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-111:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-111:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-111:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-112 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-112 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-112:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-112:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/618 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-112:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-112:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-112:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/620 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-112:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/622 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-112:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-112:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-112:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/664 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-112:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-112:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-112:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-112:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/672 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-112:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/674 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-112:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-112 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-112:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 80, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-112 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-112:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 81, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-112:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 83, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-112_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-112:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-112:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-112:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-YSV-113 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 34
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                  PV - Remote On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.4             ################################
#Author:  Miklos Boros
#Date:    06-09-2019
#Version: v1.4
#Changes:
#1. Added the option to open/close from block icon
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
## 2. Indent,                           unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros,               Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    08-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-YSV-113 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/682 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/682 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/682 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",  ARCHIVE=True,                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/682 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",  ARCHIVE=True,                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/682 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",  ARCHIVE=True,                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/682 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "TS2-010CRM:WtrC-YSV-113:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/684 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "TS2-010CRM:WtrC-YSV-113:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/686 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-YSV-113:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-YSV-113:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-YSV-113:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",  ARCHIVE=True,         PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",  ARCHIVE=True,           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_string("InterlockMsg",             39,                                  PV_NAME="InterlockMsg",   PV_DESC="Interlock Message")
record(stringin, "TS2-010CRM:WtrC-YSV-113:InterlockMsg")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/690 T=STRING L=40")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Interlock Message")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "InterlockMsg")
}

#<<<--- add_digital("NormallyOpen",            PV_DESC="PV is Normally opened")
record(bi, "TS2-010CRM:WtrC-YSV-113:NormallyOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/730 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "PV is Normally opened")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "NormallyOpen")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-YSV-113:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/730 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-113:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/732 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-YSV-113:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/736 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-YSV-113:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-YSV-113:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "GroupAlarm")
}



#Alarm signals
#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Output_Module_Error")
}

#<<<--- add_major_alarm("SSTriggered","SSTriggered",                                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:SSTriggered")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "SSTriggered")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "SSTriggered")
}

#<<<--- add_major_alarm("StaPnR","Status power and ready",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-YSV-113:StaPnR")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/740 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Status power and ready")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "StaPnR")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "TS2-010CRM:WtrC-YSV-113:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "TS2-010CRM:WtrC-YSV-113:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/746 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-YSV-113 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-YSV-113:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 85, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-YSV-113 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-YSV-113:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 86, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-YSV-113:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 88, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-YSV-113_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-YSV-113:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-YSV-113:P_Faceplate_LockID")
	field(LNK2, "TS2-010CRM:WtrC-YSV-113:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-101 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 29
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-101 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/750 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/750 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-101:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/750 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-101:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/750 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-101:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/750 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-101:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/752 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/754 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/754 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/754 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/756 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/760 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/764 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-101:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/768 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "MeasCurrent")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-101:RAWValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/772 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "RAWValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-101:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/776 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-101:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/778 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-101:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/782 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-101:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-101:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Module_Error")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-101:Param_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/786 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Param_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/788 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/796 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/800 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-101:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/804 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-101 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-101:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 90, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-101 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 91, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 93, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 95, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 97, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-101:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 99, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-101:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 101, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-101:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 103, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-101_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-101:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-101:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-101:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-101:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-101:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-101:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-101:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-101:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-102 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 29
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-102 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/808 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/808 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-102:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/808 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-102:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/808 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-102:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/808 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-102:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/810 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/812 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/812 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/812 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/814 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/818 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/822 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-102:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/826 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "MeasCurrent")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-102:RAWValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/830 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "RAWValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-102:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/834 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-102:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/836 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-102:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/840 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-102:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-102:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Module_Error")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-102:Param_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Param_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/846 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/850 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/854 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/858 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-102:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/862 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-102 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-102:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 105, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-102 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 106, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 108, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 110, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 112, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-102:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 114, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-102:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 116, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-102:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 118, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-102_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-102:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-102:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-102:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-102:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-102:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-102:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-102:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-102:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-103 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 29
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-103 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/866 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/866 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-103:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/866 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-103:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/866 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-103:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/866 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-103:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/868 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/870 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/870 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/870 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/872 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/876 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/880 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-103:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/884 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "MeasCurrent")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-103:RAWValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/888 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "RAWValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-103:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-103:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/894 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-103:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/898 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-103:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-103:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Module_Error")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-103:Param_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Param_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/904 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/908 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/912 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/916 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-103:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/920 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-103 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-103:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 120, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-103 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 121, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 123, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 125, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 127, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-103:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 129, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-103:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 131, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-103:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 133, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-103_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-103:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-103:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-103:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-103:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-103:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-103:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-103:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-103:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}




##########
########## TS2-010CRM:WtrC-TE-104 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 29
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                                TT - Temperature Transmitter in K                         ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################         Version: 1.1             ################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.1
#Changes:
#1. Modified Alarm Signal section to be compatible with new format.
############################ Version: 1.0             ########################################
#Author:  Miklos Boros
#Date:    25-01-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## TS2-010CRM:WtrC-TE-104 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/924 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/924 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "TS2-010CRM:WtrC-TE-104:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/924 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "TS2-010CRM:WtrC-TE-104:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/924 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "TS2-010CRM:WtrC-TE-104:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/924 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "TS2-010CRM:WtrC-TE-104:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/926 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/928 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/928 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/928 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/930 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/934 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",  ARCHIVE=True,            PV_DESC="Temperature Value",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/938 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature Value")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",  ARCHIVE=True,            PV_DESC="Temperature in Current",     PV_EGU="mA")
record(ai, "TS2-010CRM:WtrC-TE-104:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Temperature in Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "MeasCurrent")
}

#<<<--- add_analog("RAWValue",                 "REAL",  ARCHIVE=True,                           PV_DESC="RAW integer scaled" )
record(ai, "TS2-010CRM:WtrC-TE-104:RAWValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/946 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "RAW integer scaled")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "RAWValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "TS2-010CRM:WtrC-TE-104:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/950 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-104:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/952 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "TS2-010CRM:WtrC-TE-104:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/956 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "TS2-010CRM:WtrC-TE-104:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "TS2-010CRM:WtrC-TE-104:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Module_Error")
}

#<<<--- add_major_alarm("Param_Error",         "Parameter_Error",                PV_ZNAM="NominalState")
record(bi, "TS2-010CRM:WtrC-TE-104:Param_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(ONAM, "Parameter_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Param_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/962 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/966 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/970 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/974 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="C")
record(ai, "TS2-010CRM:WtrC-TE-104:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/978 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## TS2-010CRM:WtrC-TE-104 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "TS2-010CRM:WtrC-TE-104:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 135, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## TS2-010CRM:WtrC-TE-104 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 136, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 138, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 140, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 142, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="C")
record(ao, "TS2-010CRM:WtrC-TE-104:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 144, 100)FLOAT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "C")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "TS2-010CRM:WtrC-TE-104:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 146, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "TS2-010CRM:WtrC-TE-104:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 148, 100)INT32_BE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	field(HOPR, "2147483647")
	field(LOPR, "-2147483648")
	field(FLNK, "TS2-010CRM:WtrC-PLC-001:#plcfDoneUploadStat")
	info("plc_datablock", "DEV_TS2-010CRM:WtrC-TE-104_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "TS2-010CRM:WtrC-TE-104:#plcfDUplParamsCmd")
{
	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:HeartbeatToPLCS")
	field(LNK1, "TS2-010CRM:WtrC-TE-104:P_Limit_HIHI")
	field(LNK2, "TS2-010CRM:WtrC-TE-104:P_Limit_HI")
	field(LNK3, "TS2-010CRM:WtrC-TE-104:P_Limit_LO")
	field(LNK4, "TS2-010CRM:WtrC-TE-104:P_Limit_LOLO")
	field(LNK5, "TS2-010CRM:WtrC-TE-104:P_ForceValue")
	field(LNK6, "TS2-010CRM:WtrC-TE-104:P_Faceplate_LockID")
	field(LNK7, "TS2-010CRM:WtrC-TE-104:P_BlockIcon_LockID")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}



record(fanout, "TS2-010CRM:WtrC-PLC-001:UploadParametersCmd")
{
	alias("TS2-010CRM:WtrC-PLC-001:UploadParametersS")

	field(DESC, "Upload parameter values")
	field(SHFT, "0")
	field(LNK0, "TS2-010CRM:WtrC-PLC-001:#plcfInitUploadStat")
	field(LNK1, "TS2-010CRM:WtrC-PT-101:#plcfDUplParamsCmd")
	field(LNK2, "TS2-010CRM:WtrC-PT-102:#plcfDUplParamsCmd")
	field(LNK3, "TS2-010CRM:WtrC-YCV-101:#plcfDUplParamsCmd")
	field(LNK4, "TS2-010CRM:WtrC-YCV-102:#plcfDUplParamsCmd")
	field(LNK5, "TS2-010CRM:WtrC-YCV-103:#plcfDUplParamsCmd")
	field(LNK6, "TS2-010CRM:WtrC-YCV-104:#plcfDUplParamsCmd")
	field(LNK7, "TS2-010CRM:WtrC-YSV-109:#plcfDUplParamsCmd")
	field(LNK8, "TS2-010CRM:WtrC-YSV-110:#plcfDUplParamsCmd")
	field(LNK9, "TS2-010CRM:WtrC-YSV-111:#plcfDUplParamsCmd")
	field(LNKA, "TS2-010CRM:WtrC-YSV-112:#plcfDUplParamsCmd")
	field(LNKB, "TS2-010CRM:WtrC-YSV-113:#plcfDUplParamsCmd")
	field(LNKC, "TS2-010CRM:WtrC-TE-101:#plcfDUplParamsCmd")
	field(LNKD, "TS2-010CRM:WtrC-TE-102:#plcfDUplParamsCmd")
	field(LNKE, "TS2-010CRM:WtrC-TE-103:#plcfDUplParamsCmd")
	field(LNKF, "TS2-010CRM:WtrC-TE-104:#plcfDUplParamsCmd")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:PLCHashCorrectR")
}

record(bo, "TS2-010CRM:WtrC-PLC-001:#plcfInitUploadStat")
{
	field(DESC, "Initialize parameter uploading status")
	field(DOL,  "TS2-010CRM:WtrC-PLC-001:#plcfC1")
	field(OMSL, "closed_loop")
	field(OUT,  "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS PP")
}

record(longout, "TS2-010CRM:WtrC-PLC-001:#plcfDoneUploadStat")
{
	field(DESC, "Done parameter uploading status")
	field(DOL,  "TS2-010CRM:WtrC-PLC-001:#plcfC2")
	field(OMSL, "closed_loop")
	field(OUT,  "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS PP")
	field(SDIS, "TS2-010CRM:WtrC-PLC-001:UploadStat-RB")
	field(DISV, "0")
}

#If PLC says we are uploading but #plcfInitUploadStat was never processed ==> reset upload status in the PLC
record(calcout, "TS2-010CRM:WtrC-PLC-001:#plcfAssertUplStat")
{
	field(DESC, "Assert validity of upload statistics")
	field(INPA, "TS2-010CRM:WtrC-PLC-001:UploadStat-RB CP")
	field(INPB, "TS2-010CRM:WtrC-PLC-001:#plcfInitUploadStat.UDF")
	field(CALC, "A == 1 && B == 1")
	field(OOPT, "When Non-zero")
	field(DOPT, "Use OCAL")
	field(OCAL, "0")
	field(OUT,  "TS2-010CRM:WtrC-PLC-001:#plcfUploadStatToPLCS PP")
}

